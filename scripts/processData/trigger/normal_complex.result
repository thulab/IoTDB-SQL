-- [1]6:CREATE TIMESERIES root.sg1.d1.s1 WITH DATATYPE=DOUBLE, ENCODING=PLAIN
STRICT{
PASS
}
-- [1]13:CREATE STATELESS TRIGGER `double-beforeInsert` before INSERT ON root.sg1.d1.s1 AS 'org.example.DoubleValueMonitor' WITH (   "lo" = '5' )
STRICT{
PASS
}
-- [1]16:CREATE STATEful TRIGGER `stateful-afterInsert` after INSERT ON root.ln.alerting.table_name AS 'com.abc.trigger.stateful.test.StatefulTriggerTest' USING URI 'file:///data/trigger/stateful-test-0.14-SNAPSHOT.jar' WITH ( 'HOST'='172.20.70.44', 'data_type'='text', 'standard_value'='root.sg1.d1', 'trig_name'='stateful-afterInsert')
STRICT{
PASS
}
-- [1]19:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (1, 0)
STRICT{
0
}

Elapsed Time: 0.0.266
-- [1]20:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (2, 2)
STRICT{
0
}

Elapsed Time: 0.0.1
-- [1]21:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (3, 4)
STRICT{
0
}

Elapsed Time: 0.0.1
-- [1]22:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (4, 6)
STRICT{
0
}

Elapsed Time: 0.0.612
-- [1]23:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (5, 8)
STRICT{
0
}

Elapsed Time: 0.0.5
-- [1]24:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (6, 18)
STRICT{
0
}

Elapsed Time: 0.0.3
-- [1]25:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (7, 28)
STRICT{
0
}

Elapsed Time: 0.0.2
-- [1]26:INSERT INTO root.sg1.d1(timestamp, s1) VALUES (8, 38)
STRICT{
0
}

Elapsed Time: 0.0.554

-- [1]28:select * from root.sg1.d1
STRICT{
Time(TIME)      |root.sg1.d1.s1(DOUBLE)      |
--------------------------------------------
1               |0.0                         |
--------------------------------------------
2               |2.0                         |
--------------------------------------------
3               |4.0                         |
--------------------------------------------
4               |6.0                         |
--------------------------------------------
5               |8.0                         |
--------------------------------------------
6               |18.0                        |
--------------------------------------------
7               |28.0                        |
--------------------------------------------
8               |38.0                        |
总数目：8
}

Elapsed Time: 0.0.7

-- [1]30:select * from root.ln.alerting
STRICT{
Time(TIME)      |root.ln.alerting.alert_content(TEXT)      |root.ln.alerting.table_name(TEXT)      |
-------------------------------------------------------------------------------------------------
1668389669030   |[4] WARN [s1]: 6.0 greater then 5.0       |root.sg1.d1                            |
-------------------------------------------------------------------------------------------------
1668389669642   |[5] WARN [s1]: 8.0 greater then 5.0       |root.sg1.d1                            |
-------------------------------------------------------------------------------------------------
1668389669647   |[6] WARN [s1]: 18.0 greater then 5.0      |root.sg1.d1                            |
-------------------------------------------------------------------------------------------------
1668389669649   |[7] WARN [s1]: 28.0 greater then 5.0      |root.sg1.d1                            |
-------------------------------------------------------------------------------------------------
1668389669652   |[8] WARN [s1]: 38.0 greater then 5.0      |root.sg1.d1                            |
总数目：5
}

Elapsed Time: 0.0.6

-- [1]32:select * from root.target.alerting.stateful
STRICT{
Time(TIME)      |root.target.alerting.stateful.trig_name(TEXT)      |root.target.alerting.stateful.ts_type(TEXT)      |root.target.alerting.stateful.value(TEXT)      |root.target.alerting.stateful.device(TEXT)      |
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1668389669669   |stateful-afterInsert                               |text                                             |4                                              |root.ln.alerting.table_name                     |
总数目：1
}

Elapsed Time: 0.0.9
-- [1]35:drop trigger `stateful-afterInsert`
STRICT{
PASS
}
-- [1]36:drop trigger `double-beforeInsert`
STRICT{
PASS
}
-- [1]40:set storage group to root.sg1
STRICT{
PASS
}
-- [1]42:CREATE ALIGNED TIMESERIES root.sg1.dev1 (s_1 DATATYPE=double ENCODING=GORILLA, s_2 DATATYPE=INT64 ENCODING=PLAIN)
STRICT{
PASS
}
-- [1]49:CREATE STATELESS TRIGGER `double-beforeInsert` before INSERT ON root.sg1.dev1.* AS 'org.example.DoubleValueMonitor' WITH (   "lo" = '85' )
STRICT{
PASS
}
-- [1]51:CREATE STATEful TRIGGER `stateful-afterInsert` after INSERT ON root.sg1.dev1.* AS 'com.abc.trigger.stateful.test.StatefulTriggerTest' USING URI 'file:///data/trigger/stateful-test-0.14-SNAPSHOT.jar' WITH ( 'HOST'='172.20.70.44', 'data_type'='double', 'standard_value'='50', 'trig_name'='stateful-afterInsert')
STRICT{
PASS
}
-- [1]54:insert into root.sg1.dev1(time, s_1, s_2) aligned values(1, 105,109),(2, 33,56),(3,86,89),(4,50,56),(5,66,67),(6,77,78)
STRICT{
0
}

Elapsed Time: 0.1.345

-- [1]57:select * from root.sg1.dev1
STRICT{
Time(TIME)      |root.sg1.dev1.s_1(DOUBLE)      |root.sg1.dev1.s_2(INT64)      |
-----------------------------------------------------------------------------
1               |105.0                          |109                           |
-----------------------------------------------------------------------------
2               |33.0                           |56                            |
-----------------------------------------------------------------------------
3               |86.0                           |89                            |
-----------------------------------------------------------------------------
4               |50.0                           |56                            |
-----------------------------------------------------------------------------
5               |66.0                           |67                            |
-----------------------------------------------------------------------------
6               |77.0                           |78                            |
总数目：6
}

Elapsed Time: 0.0.7

-- [1]59:select * from root.ln.alerting
STRICT{
Time(TIME)      |root.ln.alerting.alert_content(TEXT)      |root.ln.alerting.table_name(TEXT)      |
-------------------------------------------------------------------------------------------------
1668389672450   |[1] CRITICAL [s_1]: 105.0 greater then 100|root.sg1.dev1                          |
                |.0                                        |                                       |
-------------------------------------------------------------------------------------------------
1668389672985   |[3] WARN [s_1]: 86.0 greater then 85.0    |root.sg1.dev1                          |
总数目：2
}

Elapsed Time: 0.0.7

-- [1]61:select * from root.target.alerting.stateful
STRICT{
Time(TIME)      |root.target.alerting.stateful.trig_name(TEXT)      |root.target.alerting.stateful.ts_type(TEXT)      |root.target.alerting.stateful.value(TEXT)      |root.target.alerting.stateful.device(TEXT)      |
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1668389673012   |stateful-afterInsert                               |double                                           |2                                              |root.sg1.dev1.s_1                               |
总数目：1
}

Elapsed Time: 0.0.7
-- [1]64:drop trigger `stateful-afterInsert`
STRICT{
PASS
}
-- [1]65:drop trigger `double-beforeInsert`
STRICT{
PASS
}
