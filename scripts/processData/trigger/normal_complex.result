-- [1]6:CREATE TIMESERIES root.triggertest.d1.s1 WITH DATATYPE=DOUBLE, ENCODING=PLAIN
STRICT{
PASS
}
-- [1]14:CREATE STATELESS TRIGGER `double-beforeInsert` before INSERT ON root.triggertest.d1.s1 AS 'org.example.DoubleValueMonitor' WITH (   "remote_ip"="172.20.70.44",   "lo" = '5' )
STRICT{
PASS
}
-- [1]26:CREATE STATEful TRIGGER `stateful-afterInsert` after INSERT ON root.ln.alerting.table_name AS 'com.abc.trigger.stateful.test.StatefulTriggerTest' USING URI 'file:///data/nginx/stateful-test-0.14-SNAPSHOT.jar' WITH (   'HOST'='172.20.70.44',   'data_type'='text',   'standard_value'='root.triggertest.d1',   'trig_name'='stateful-afterInsert' )
STRICT{
PASS
}
-- [1]30:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (1, 0)
STRICT{
0
}

Elapsed Time: 0.0.10
-- [1]31:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (2, 2)
STRICT{
0
}

Elapsed Time: 0.0.1
-- [1]32:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (3, 4)
STRICT{
0
}

Elapsed Time: 0.0.0
-- [1]33:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (4, 6)
STRICT{
0
}

Elapsed Time: 0.0.524
-- [1]34:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (5, 8)
STRICT{
0
}

Elapsed Time: 0.0.4
-- [1]35:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (6, 18)
STRICT{
0
}

Elapsed Time: 0.0.2
-- [1]36:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (7, 28)
STRICT{
0
}

Elapsed Time: 0.0.2
-- [1]37:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (8, 38)
STRICT{
0
}

Elapsed Time: 0.0.16

-- [1]39:select * from root.triggertest.d1
STRICT{
Time(TIME)      |root.triggertest.d1.s1(DOUBLE)      |
----------------------------------------------------
1               |0.0                                 |
----------------------------------------------------
2               |2.0                                 |
----------------------------------------------------
3               |4.0                                 |
----------------------------------------------------
4               |6.0                                 |
----------------------------------------------------
5               |8.0                                 |
----------------------------------------------------
6               |18.0                                |
----------------------------------------------------
7               |28.0                                |
----------------------------------------------------
8               |38.0                                |
总数目：8
}

Elapsed Time: 0.0.6

-- [1]41:select * from root.ln.alerting
STRICT{
Time(TIME)      |root.ln.alerting.alert_content(TEXT)      |root.ln.alerting.table_name(TEXT)      |
-------------------------------------------------------------------------------------------------
1669693855927   |[4] WARN [s1]: 6.0 greater then 5.0       |root.triggertest.d1                    |
-------------------------------------------------------------------------------------------------
1669693856453   |[5] WARN [s1]: 8.0 greater then 5.0       |root.triggertest.d1                    |
-------------------------------------------------------------------------------------------------
1669693856457   |[6] WARN [s1]: 18.0 greater then 5.0      |root.triggertest.d1                    |
-------------------------------------------------------------------------------------------------
1669693856459   |[7] WARN [s1]: 28.0 greater then 5.0      |root.triggertest.d1                    |
-------------------------------------------------------------------------------------------------
1669693856461   |[8] WARN [s1]: 38.0 greater then 5.0      |root.triggertest.d1                    |
总数目：5
}

Elapsed Time: 0.0.4

-- [1]43:select * from root.target.alerting.stateful
STRICT{
Time(TIME)      |root.target.alerting.stateful.trig_name(TEXT)      |root.target.alerting.stateful.ts_type(TEXT)      |root.target.alerting.stateful.value(TEXT)      |root.target.alerting.stateful.device(TEXT)      |
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1669693856461   |stateful-afterInsert                               |text                                             |4                                              |root.ln.alerting.table_name                     |
总数目：1
}

Elapsed Time: 0.0.5
-- [1]46:drop trigger `stateful-afterInsert`
STRICT{
PASS
}
-- [1]47:drop trigger `double-beforeInsert`
STRICT{
PASS
}
-- [1]53:CREATE ALIGNED TIMESERIES root.triggertest.dev1 (s_1 DATATYPE=double ENCODING=GORILLA, s_2 DATATYPE=INT64 ENCODING=PLAIN)
STRICT{
PASS
}
-- [1]63:CREATE STATELESS TRIGGER `double-beforeInsert` before INSERT ON root.triggertest.dev1.* AS 'org.example.DoubleValueMonitor' WITH (   "remote_ip"="172.20.70.44",   "lo" = '85' )
STRICT{
PASS
}
-- [1]74:CREATE STATEful TRIGGER `stateful-afterInsert` after INSERT ON root.triggertest.dev1.* AS 'com.abc.trigger.stateful.test.StatefulTriggerTest' USING URI 'file:///data/nginx/stateful-test-0.14-SNAPSHOT.jar' WITH (   'HOST'='172.20.70.44',   'data_type'='double',   'standard_value'='50',   'trig_name'='stateful-afterInsert' )
STRICT{
PASS
}
-- [1]78:insert into root.triggertest.dev1(time, s_1, s_2) aligned values(1, 105,109),(2, 33,56),(3,86,89),(4,50,56),(5,66,67),(6,77,78)
STRICT{
0
}

Elapsed Time: 0.0.292

-- [1]81:select * from root.triggertest.dev1
STRICT{
Time(TIME)      |root.triggertest.dev1.s_1(DOUBLE)      |root.triggertest.dev1.s_2(INT64)      |
---------------------------------------------------------------------------------------------
1               |105.0                                  |109                                   |
---------------------------------------------------------------------------------------------
2               |33.0                                   |56                                    |
---------------------------------------------------------------------------------------------
3               |86.0                                   |89                                    |
---------------------------------------------------------------------------------------------
4               |50.0                                   |56                                    |
---------------------------------------------------------------------------------------------
5               |66.0                                   |67                                    |
---------------------------------------------------------------------------------------------
6               |77.0                                   |78                                    |
总数目：6
}

Elapsed Time: 0.0.5

-- [1]83:select * from root.ln.alerting
STRICT{
Time(TIME)      |root.ln.alerting.alert_content(TEXT)      |root.ln.alerting.table_name(TEXT)      |
-------------------------------------------------------------------------------------------------
1669693858988   |[1] CRITICAL [s_1]: 105.0 greater then 100|root.triggertest.dev1                  |
                |.0                                        |                                       |
-------------------------------------------------------------------------------------------------
1669693858993   |[3] WARN [s_1]: 86.0 greater then 85.0    |root.triggertest.dev1                  |
总数目：2
}

Elapsed Time: 0.0.3

-- [1]85:select * from root.target.alerting.stateful
STRICT{
Time(TIME)      |root.target.alerting.stateful.trig_name(TEXT)      |root.target.alerting.stateful.ts_type(TEXT)      |root.target.alerting.stateful.value(TEXT)      |root.target.alerting.stateful.device(TEXT)      |
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1669693859060   |stateful-afterInsert                               |double                                           |2                                              |root.triggertest.dev1.s_1                       |
总数目：1
}

Elapsed Time: 0.0.5
-- [1]88:drop trigger `stateful-afterInsert`
STRICT{
PASS
}
-- [1]89:drop trigger `double-beforeInsert`
STRICT{
PASS
}
