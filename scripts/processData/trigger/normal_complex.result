-- [1]9:CREATE TIMESERIES root.triggertest.d1.s1 WITH DATATYPE=DOUBLE, ENCODING=PLAIN
STRICT{
PASS
}
-- [1]17:CREATE STATELESS TRIGGER `double-beforeInsert` before INSERT ON root.triggertest.d1.s1 AS 'org.example.DoubleValueMonitor' WITH (   "remote_ip"="127.0.0.1",   "lo" = '5' )
STRICT{
PASS
}
-- [1]29:CREATE STATEful TRIGGER `stateful-afterInsert` after INSERT ON root.ln.alerting.table_name AS 'com.abc.trigger.stateful.test.StatefulTriggerTest' USING URI 'file:///data/nginx/stateful-test-0.14-SNAPSHOT.jar' WITH (   'HOST'='127.0.0.1',   'data_type'='text',   'standard_value'='root.triggertest.d1',   'trig_name'='stateful-afterInsert' )
STRICT{
PASS
}
-- [1]33:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (1, 0)
STRICT{
0
}

Elapsed Time: 0.1.259
-- [1]34:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (2, 2)
STRICT{
0
}

Elapsed Time: 0.0.0
-- [1]35:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (3, 4)
STRICT{
0
}

Elapsed Time: 0.0.1
-- [1]36:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (4, 6)
STRICT{
0
}

Elapsed Time: 0.3.517
-- [1]37:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (5, 8)
STRICT{
0
}

Elapsed Time: 0.0.2
-- [1]38:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (6, 18)
STRICT{
0
}

Elapsed Time: 0.0.1
-- [1]39:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (7, 28)
STRICT{
0
}

Elapsed Time: 0.0.1
-- [1]40:INSERT INTO root.triggertest.d1(timestamp, s1) VALUES (8, 38)
STRICT{
0
}

Elapsed Time: 0.2.528

-- [1]42:select * from root.triggertest.d1
STRICT{
Time(TIME)      |root.triggertest.d1.s1(DOUBLE)      |
----------------------------------------------------
1               |0.0                                 |
----------------------------------------------------
2               |2.0                                 |
----------------------------------------------------
3               |4.0                                 |
----------------------------------------------------
4               |6.0                                 |
----------------------------------------------------
5               |8.0                                 |
----------------------------------------------------
6               |18.0                                |
----------------------------------------------------
7               |28.0                                |
----------------------------------------------------
8               |38.0                                |
总数目：8
}

Elapsed Time: 0.0.2

-- [1]44:select count(*) from root.ln.alerting
STRICT{
count(root.ln.alerting.alert_content)(INT64)      |count(root.ln.alerting.table_name)(INT64)      |
-------------------------------------------------------------------------------------------------
5                                                 |5                                              |
总数目：1
}

Elapsed Time: 0.0.2

-- [1]46:select count(*) from root.target.alerting.stateful
STRICT{
count(root.target.alerting.stateful.trig_name)(INT64)      |count(root.target.alerting.stateful.ts_type)(INT64)      |count(root.target.alerting.stateful.value)(INT64)      |count(root.target.alerting.stateful.device)(INT64)      |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1                                                          |1                                                        |1                                                      |1                                                       |
总数目：1
}

Elapsed Time: 0.0.2
-- [1]49:drop trigger `stateful-afterInsert`
STRICT{
PASS
}
-- [1]50:drop trigger `double-beforeInsert`
STRICT{
PASS
}
-- [1]56:CREATE ALIGNED TIMESERIES root.triggertest.dev1 (s_1 DATATYPE=double ENCODING=GORILLA, s_2 DATATYPE=INT64 ENCODING=PLAIN)
STRICT{
PASS
}
-- [1]66:CREATE STATELESS TRIGGER `double-beforeInsert` before INSERT ON root.triggertest.dev1.* AS 'org.example.DoubleValueMonitor' WITH (   "remote_ip"="127.0.0.1",   "lo" = '85' )
STRICT{
PASS
}
-- [1]77:CREATE STATEful TRIGGER `stateful-afterInsert` after INSERT ON root.triggertest.dev1.* AS 'com.abc.trigger.stateful.test.StatefulTriggerTest' USING URI 'file:///data/nginx/stateful-test-0.14-SNAPSHOT.jar' WITH (   'HOST'='127.0.0.1',   'data_type'='double',   'standard_value'='50',   'trig_name'='stateful-afterInsert' )
STRICT{
PASS
}
-- [1]81:insert into root.triggertest.dev1(time, s_1, s_2) aligned values(1, 105,109),(2, 33,56),(3,86,89),(4,50,56),(5,66,67),(6,77,78)
STRICT{
0
}

Elapsed Time: 0.1.269

-- [1]84:select * from root.triggertest.dev1
STRICT{
Time(TIME)      |root.triggertest.dev1.s_1(DOUBLE)      |root.triggertest.dev1.s_2(INT64)      |
---------------------------------------------------------------------------------------------
1               |105.0                                  |109                                   |
---------------------------------------------------------------------------------------------
2               |33.0                                   |56                                    |
---------------------------------------------------------------------------------------------
3               |86.0                                   |89                                    |
---------------------------------------------------------------------------------------------
4               |50.0                                   |56                                    |
---------------------------------------------------------------------------------------------
5               |66.0                                   |67                                    |
---------------------------------------------------------------------------------------------
6               |77.0                                   |78                                    |
总数目：6
}

Elapsed Time: 0.0.2

-- [1]86:select count(*) from root.ln.alerting
STRICT{
count(root.ln.alerting.alert_content)(INT64)      |count(root.ln.alerting.table_name)(INT64)      |
-------------------------------------------------------------------------------------------------
2                                                 |2                                              |
总数目：1
}

Elapsed Time: 0.0.1

-- [1]88:select count(*) from root.target.alerting.stateful
STRICT{
count(root.target.alerting.stateful.trig_name)(INT64)      |count(root.target.alerting.stateful.ts_type)(INT64)      |count(root.target.alerting.stateful.value)(INT64)      |count(root.target.alerting.stateful.device)(INT64)      |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1                                                          |1                                                        |1                                                      |1                                                       |
总数目：1
}

Elapsed Time: 0.0.1
-- [1]91:drop trigger `stateful-afterInsert`
STRICT{
PASS
}
-- [1]92:drop trigger `double-beforeInsert`
STRICT{
PASS
}
